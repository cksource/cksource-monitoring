apiVersion: 1

contactPoints:
  - uid: "e5282c6b-1275-4a22-9cbb-cf44cb469259"
    name: "CKSource Slack"
    type: "slack"
    settings:
      mentionChannel: "channel"
      text: "{{ range .Alerts }}\n*Description:* {{ .Annotations.description }}{{ if gt (len .GeneratorURL) 0 }}\n<{{ .GeneratorURL }}|Source> {{ end }}{{ if gt (len .SilenceURL) 0 }} <{{ .SilenceURL }}|Silence> {{ end }}{{ end }}"
      title: "[ {{ .Status | toUpper }} ] {{ .CommonLabels.alertname }}"
      url: "[REDACTED]" # TODO: change url?
      username: "CKSource Monitoring"
    disableResolveMessage: false

policies:
  - receiver: "CKSource Slack"
    group_by: ["alertname"]
    group_wait: "30s"
    group_interval: "5m"
    repeat_interval: "15m"
